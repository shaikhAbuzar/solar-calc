<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
    <!-- JS Logic for hiding -->
    <script type="text/javascript">
        function show_ic(){
            var connection_type = document.getElementById("connection_type");
            console.log(connection_type.value);
            var selected_connection_type = connection_type.options[connection_type.selectedIndex].value;
            var commercials = document.getElementsByClassName("commercial_connection");
            var industrials = document.getElementsByClassName("industrial_connection")
            if (selected_connection_type == "Commercial"){
                for(var i = 0, length = commercials.length; i < length; i++) {
                    commercials[i].style.display = 'block';
                }
                for(var i = 0, length = industrials.length; i < length; i++) {
                    industrials[i].style.display = 'none';
                }
            }
            else if (selected_connection_type == "Industrial"){
                for(var i = 0, length = commercials.length; i < length; i++) {
                    commercials[i].style.display = 'none';
                }
                for(var i = 0, length = industrials.length; i < length; i++) {
                    industrials[i].style.display = 'block';
                }
            }
            else{
                for(var i = 0, length = commercials.length; i < length; i++) {
                    commercials[i].style.display = 'none';
                }
                for(var i = 0, length = industrials.length; i < length; i++) {
                    industrials[i].style.display = 'none';
                }
            }
        }
        function show_state(){
            var state = document.getElementById("state");
            var state = state.options[state.selectedIndex].value;
            console.log(state)
            console.log(state != "Maharashtra" && state != "Madhya Pradesh" && state != "Gujarat")

            // For Remaining states
            if (state != "Maharashtra" && state != "Madhya Pradesh" && state != "Gujarat"){
                console.log("Others")
                document.getElementById("connection_type_gujarat").style.display = "none";
                document.getElementById("connection_type_others").style.display = "none";
                document.getElementById("mh_connection").style.display = "none";
                document.getElementById("mp_connection").style.display = "none";
                document.getElementById("all-other-states").style.display = "block";
            }
            else{
                console.log("Not Others")
                document.getElementById("all-other-states").style.display = "none";
                document.getElementById("connection_type_others").style.display = "block";

                // For industrial and commercial connection specific to state
                if (state == "Maharashtra"){
                    document.getElementById("mh_connection").style.display = "block";
                    document.getElementById("mp_connection").style.display = "none";
                }
                else if (state == "Madhya Pradesh"){
                    console.log(state)
                    document.getElementById("mh_connection").style.display = "none";
                    document.getElementById("mp_connection").style.display = "block";
                }
                else{
                    document.getElementById("mh_connection").style.display = "none";
                    document.getElementById("mp_connection").style.display = "none";
                }

                // For Gujarat
                if (state == 'Gujarat'){
                    document.getElementById("connection_type_gujarat").style.display = "block";
                    document.getElementById("connection_type_others").style.display = "none";
                } else {
                    document.getElementById("connection_type_gujarat").style.display = "none";
                    document.getElementById("connection_type_others").style.display = "block";
                }
            }
        }
    </script>
    <title>Calculator</title>
</head>
<body>
    <div class="container">
        <h1 class="fs-1">Calculator</h1>
    </div>
    <div class="container">
        <form method="POST" action="">
            {{ form.hidden_tag() }}
            <fieldset class="form-group">
                <legend class="border-bottom mb-4">Enter Values to Get Estimates</legend>
                <div class="form-group">
                    {{ form.state.label(class="form-control-label fs-3 text") }}
                    {{ form.state(class="form-control form-control-lg", onchange="show_state()", id="state") }}
                </div>
                <div class="form-group">
                    {{ form.consumption.label(class="form-control-label fs-3 text") }}
                    {{ form.consumption(class="form-control form-control-lg") }}
                </div>
                <div class="form-group" id="connection_type_others" style="display: none;">
                    {{ form.connection.label(class="form-control-label fs-3 text") }}
                    {{ form.connection(class="form-control form-control-lg", onchange="show_ic()", id="connection_type") }}
                </div>
                <div class="form-group" id="connection_type_gujarat" style="display: none;">
                    {{ form.connection_gujarat.label(class="form-control-label fs-3 text") }}
                    {{ form.connection_gujarat(class="form-control form-control-lg", onchange="show_ic()", id="connection_type") }}
                </div>
                <div id="mh_connection" style="display: none;">
                    <div class="form-group commercial_connection" style="display: none;">
                        {{ form.commercial_type_mh.label(class="form-control-label fs-3 text") }}
                        {{ form.commercial_type_mh(class="form-control form-control-lg") }}
                    </div>
                    <div class="form-group industrial_connection" style="display: none;">
                        {{ form.industrial_type_mh.label(class="form-control-label fs-3 text") }}
                        {{ form.industrial_type_mh(class="form-control form-control-lg") }}
                    </div>
                </div>
                <div id="mp_connection" style="display: none;">
                    <div class="form-group commercial_connection" style="display: none;">
                        {{ form.commercial_type_mp.label(class="form-control-label fs-3 text") }}
                        {{ form.commercial_type_mp(class="form-control form-control-lg") }}
                    </div>
                    <div class="form-group industrial_connection" style="display: none;">
                        {{ form.industrial_type_mp.label(class="form-control-label fs-3 text") }}
                        {{ form.industrial_type_mp(class="form-control form-control-lg") }}
                    </div>
                </div>
                <div id="all-other-states" class="form-group tarrif" style="display: none;">
                    {{ form.tariff.label(class="form-control-label fs-3 text") }}
                    {{ form.tariff(class="form-control form-control-lg") }}
                </div>
                <div class="form-group">
                    {{ form.connected_load.label(class="form-control-label fs-3 text") }}
                    {{ form.connected_load(class="form-control form-control-lg") }}
                </div>
            </fieldset>
            <div class="form-group mt-2">
                {{ form.submit(class="btn btn-outline-info") }}
            </div>
        </form>
    </div>
</body>
</html>